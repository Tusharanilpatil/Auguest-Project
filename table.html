<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Student list</title>

    
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
</head>
<body>

    <h1 style="text-align: center;">Student List</Table></h1>

    <div class="container">
        <!-- <table>
            <thead>
                <tr>
                    <th>Id</th>
                    <th>First Name</th>
                    <th>Last Name</th>
                    <th>Gender</th>
                    <th>Email</th>
                    <th>Mobile</th>
                    <th>Education</th>
                    <th>Date of Birth</th>
                    <th>Address</th>
                    <th>City</th>
                    <th>State</th>
                    <th>Action</th>
                </tr>
            </thead>
            <tbody id="table-body">

            </tbody>
        </table> -->

        <!-- <div class="container"> -->
            <table class="table table-dark table-striped">
                <thead>
                  <tr>
                    <th>Id</th>
                    <th>First Name</th>
                    <th>Last Name</th>
                    <th>Gender</th>
                    <th>Email</th>
                    <th>Mobile</th>
                    <th>Education</th>
                    <th>Date of Birth</th>
                    <th>Address</th>
                    <th>City</th>
                    <th>State</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody id="table-body">
              </table>
            <!-- </div> -->
       
    </div>
    <script>
        function getStudents(){
            fetch("http://localhost:3000/students",{
                method: "GET",
                "Content-Type":"application/json",
                "Accept-Type": "application/json"
            }).then(response=>{
    
                
                response.json().then(studentList=>{

                for(let singleStudent of studentList){
                        let singleTr = document.createElement("tr");

                        let td1 = document.createElement("td");
                        td1.innerHTML = singleStudent.id;

                        let td2 = document.createElement("td");
                        td2.innerHTML = singleStudent.Firstname;

                        let td3 = document.createElement("td");
                        td3.innerHTML = singleStudent.Lastname;

                        let td4 = document.createElement("td");
                        td4.innerHTML = singleStudent.Gender;

                        let td5 = document.createElement("td");
                        td5.innerHTML = singleStudent.Email;


                        let  td6 = document.createElement("td");
                        td6.innerHTML = singleStudent.Mobile;

                        let td7 = document.createElement("td");
                        td7.innerHTML = singleStudent.Education;

                        let td8 = document.createElement("td");
                        td8.innerHTML = singleStudent.DOB;

                        let td9 = document.createElement("td");
                        td9.innerHTML = singleStudent.Address;

                        let td10 = document.createElement("td");
                        td10.innerHTML = singleStudent.City;

                        let td11 = document.createElement("td");
                        td11.innerHTML = singleStudent.State;

                        let td12 = document.createElement("td");
                        td12.innerHTML = `<div class="d-flex">
                            <a type="button" class="btn btn-primary" href="forms.html?studentId=${singleStudent.id}">Edit</a> &nbsp;
                        <button type="button" class="btn btn-danger" onclick="deleteStudent(${singleStudent.id})">Delete</button> </div>`;

                        singleTr.appendChild(td1);
                        singleTr.appendChild(td2)
                        singleTr.appendChild(td3)
                        singleTr.appendChild(td4)
                        singleTr.appendChild(td5)
                        singleTr.appendChild(td6);
                        singleTr.appendChild(td7);
                        singleTr.appendChild(td8);
                        singleTr.appendChild(td9);
                        singleTr.appendChild(td10);
                        singleTr.appendChild(td11);
                        singleTr.appendChild(td12);



                        document.getElementById("table-body").appendChild(singleTr)
                    }
                })
            })
        }
        getStudents();

        function deleteStudent(id){
            // document.getElementById.innerHTML(id,"id")
            console.log(id,"id");
            
            let result = prompt("Are you really want to delete student with id" + id);
            if(result == "yes"){
            fetch("http://localhost:3000/students/" +id,{
                method: "DELETE",
                "Accept-Type": "application/json"
            }).then(response=>{
                response.json().then(data=>{
                    getStudents();
                    alert("Student Deleted");
                })
            })
            }
        }
    </script>
</body>

<!-- <style>
    table {
     border: 1px solid black;
     margin-top: 10px;
     margin-bottom: 100px;
     margin-right: 50px;
     margin-left: 15%;
     background-color: lightblue;
     }

     table {
      font-family: arial, sans-serif;
      border-collapse: collapse;
      width: 70%;
    }
    
    td, th {
      border: 1px solid hwb(0 0% 100% / 0.918);
      text-align: left;
      padding: 8px;
    }
    
    tr:nth-child(even) {
      background-color: hsla(182, 82%, 59%, 0.877);
    }
    </style> -->



</html>